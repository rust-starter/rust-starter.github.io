<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="author" content="Abid Omar"/>
    <meta name="description" content="Simple Rust Framework">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="style-3ff98a5432.min.css" type="text/css"/>
    <link rel="icon" href="images/logo.svg" sizes="any" type="image/svg+xml">

    <!-- Title -->
    <title>rust-starter | Simple Rust Framework</title>
</head>

<body class="terminal">
    <div class="container">

        <div class="terminal-nav">
                    <header class="terminal-logo">
                        <div class="logo"><img height="60px" src="images/logo_color.svg" /><a href="https://rust-starter.github.io" class="no-style">rust-starter</a></div>
                    </header>
                    <nav class="terminal-menu">
                        <ul vocab="https://schema.org/" typeof="BreadcrumbList">
                            <li style="height: 28px;"><a class="github-button" href="https://github.com/rust-starter/rust-starter"
                                    data-size="large" data-show-count="true" aria-label="Star rust-starter on GitHub">Star</a></li>
                        </ul>
                    </nav>
                </div>

        <p>Create Rust CLI apps with no build configuration.</p>

        <h2 id="what-is">What is rust-starter?</h2>
        <p><code>rust-starter</code> is a template CLI app that compiles. It makes
            choices about depedencies, structure, configuration, error handling,
            logging, CI/CD and more.</p>
        <p>It is useful if you are looking to build a CLI application with Rust. It helps you get started quickly and have sane defaults
            in place.</p>
        <h2 id="how-to-use">Philosopy</h2>
        <ul>
            <li><strong>Select Depedencies: </strong> <code>rust-starter</code> is
                biased toward popular and stable depedencies. These can be changed,
                but we make this choice so that you can focus on coding.</li>
            <li><strong>No Configuration: </strong> The <code>rust-starter</code> template
                already compiles, so you don't need to configure anything to get
                your program working.</li>
            <li><strong>Sane Choices: </strong> <code>rust-starter</code> follows the
                <a href="https://github.com/mre/idiomatic-rust">idiomatic Rust</a>                philosophy. It attempts to follow and stick to the industry best
                practices.</li>
            <li><strong>Documentation</strong>: Detailed documentation for the choices, features and possible configurations.
                </li>
        </ul>

        <hr /> <main>
    <section>
        <h2 id="table-of-content">Table of Content</h2>
        <nav>
            <ol class="terminal-toc">
                <li><a href="#getting-started">Getting Started.</a></li>
                <li><a href="#faq">FAQ.</a></li>
                <li class="has-child">
                    <a href="#features">Features.</a>
                    <ol>
                        <li><a href="#feature-workspaces">Workspaces.</a></li>
                        <li><a href="#feature-clap">Clap.</a></li>
                        <li><a href="#feature-errors">Errors.</a></li>
                        <li><a href="#feature-configuration">Configuration.</a></li>
                        <li><a href="#feature-logging">Logging.</a></li>
                        <li><a href="#feature-testing">Testing.</a></li>
                        <li><a href="#feature-cicd">CI/CD.</a></li>
                        <li><a href="#feature-github">Github Actions.</a></li>
                        <li><a href="#feature-generate">Cargo Generate.</a></li>
                    </ol>
                </li>
                <li><a href="#contributing">Contributing.</a></li>
                <li><a href="#license">License.</a></li>
                <li><a href="#author">Author.</a></li>
            </ol>
        </nav>
    </section>
</main>


        <hr />

        <section>
            <header>
                <h2 id="getting-started">Getting Started</h2>
            </header>
            <p>
                <code>rust-starter</code> aims to keep things simple.
                Simply clone the repository, and run the project.
            </p>
            <pre><code>
git clone git@github.com:rust-starter/rust-starter.git
cd rust-starter
cargo run
                </code></pre>
            <p>
                There are no configurations required and no initial code to write. You should get
                the following output upon running <code>cargo run</code>
            </p>
            <pre><code>
rust-starter 1.0.0
Abid Omar <contact@omarabid.com>
CLI interface

USAGE:
    rust-starter [OPTIONS] [SUBCOMMAND]

FLAGS:
    -h, --help       Prints help information
    -V, --version    Prints version information

OPTIONS:
    -c, --config <FILE>    Set a custom config file

SUBCOMMANDS:
    config    Show Configuration
    error     Simulate an error
    hazard    Generate a hazardous occurance
    help      Prints this message or the help of the given subcommand(s)
</code></pre>
            <p>
                That's it. If you got this output, <code>rust-starter</code> has
                successfully compiled and run. You can also run the available subcommands
                like <code>cargo run config</code> to show the loaded configuration
                and <code>cargo run hazard</code> which is a sample subcommand.
            </p>
        </section>

        <hr />

        <section>
            <header>
                <h2 id="faq">FAQ</h2>
            </header>
            <div class="terminal-card">
                <header>How does rust-starter compare to clap?</header>
                <div>
                    <code>clap</code> and <code>rust-starter</code> do not serve
                        the same purpose.
                </div>
            </div>
            <div class="terminal-card">
                <header>What are some reasons to use rust-starter?</header>
                <div>
                    <code>clap</code> and <code>rust-starter</code> do not serve
                        the same purpose.
                </div>
            </div>
            <div class="terminal-card">
                <header>What are some reasons <strong>not</strong> to use rust-starter?</header>
                <div>
                    <code>clap</code> and <code>rust-starter</code> do not serve the same purpose.
                </div>
            </div>
        </section>

        <hr />

        <section>
            <header>
                <h2 id="features">Features</h2>
            </header>

            <section>
                <header>
                    <h3 id="feature-workspaces"><a href="#feature-workspaces">#</a> Workspaces</h3>
                </header>
                <p>
                <code>rust-starter</code> makes use of <a href="https://doc.rust-lang.org/book/ch14-03-cargo-workspaces.html">Cargo Workspaces</a> to manage and structure your program. It is possible to have all of the code in a single  workspace and the <code>rust-starter</code> template doesn't need more than one. However, starting this way will help you split code into a separate workspace when you see fit.
                </p>
                <p>
                The main program is inside <code>src</code>. Its main purpose is to start the program, the configuration, logging, etc... It's not supposed to have any functionality. It is recommended that these are added through Workspaces. <code>rust-starter</code> comes with 3 workspaces.
                </p>
                <ul>

                    <li><strong>cli</strong> : Configure and start Clap.</li>
                    <li><strong>core</strong> : This is where your program code should go.</li>
                    <li><strong>utils</strong> : Various utilities like logging, configuration, errors, etc...</li>
                </ul>
                <p>
                These different workspaces are libraries. It's preferrable that new workspaces can compile on their own. This makes your code modular and unit testing much simpler. You can add more workspaces if you need to.
                </p>
            </section>

            <section>
                <header>
                    <h3 id="feature-clap"><a href="#feature-clap">#</a> Clap</h3>
                </header>
                <p>
                <code>rust-starter</code> uses <a href="https://github.com/clap-rs/clap">clap</a> to parse Command Line arguments. <code>clap</code> is simple, efficient and widely used by the community.
                </p>
                <p>The version used is still in beta (Version 3) but since it has non-backward compatible changes, and several useful upgrades; it might be worthwhile to use the beta until a stable version 3 is released.
                </p>
                <p>
                <code>clap</code> configuration code can be found in <code>cli/src/lib.rs</code>.
                </p>
            </section>

            <section>
                <header>
                    <h3 id="feature-errors"><a href="#feature-errors">#</a> Errors</h3>
                </header>
                <p>
                <code>rust-starter</code> tries to follow the best practices to handle errors. For this, it is useful that your program uses Rust's <code>std::error::Error</code> trait. All your errors should implement this trait. With the 1.0 release, <code>rust-starter</code> uses the <a href="https://github.com/rust-lang-nursery/failure">failure</a> crate; which is now deprecated. <a href="https://github.com/dtolnay/thiserror">thiserror</a> will be used instead in the future; see the note below.
                </p>
                <p>
                To be able to propagate errors using the <code>?</code> operator, it's possible to <a href="https://doc.rust-lang.org/stable/rust-by-example/error/multiple_error_types/boxing_errors.html">wrap your custom error type</a> with a Box type. This has the downside of dynamically allocating memory for errors in the heap. A better approach is to convert errors at compile time; which <code>rust-starter</code> has a few examples of.
                </p>
                <p>
                The approach taken is to define proper <code>Result</code> and <code>Error</code> types. This has the advantage of easy upgrades and library changes. For example, if you want to switch from the <code>thiserror</code> crate, you have a central and single place to do this change, and the rest of your code is unchanged.
                </p>
                <h5>Simulating an error</h5>
                <p>
                To test that our error reporting is functioning correctly, <code>rust-starter</code> has a special subcommand to intentionally trigger an error.
                </p>
                <pre><code>cargo run error</code></pre>
                <p>
                <code>rust-starter</code> uses the <a href="https://github.com/mitsuhiko/better-panic">better-panic</a> crate to print and prettify backtraces. This library is only enabled when debugging and disabled for release builds.
                </p>
                <p class="terminal-alert terminal-alert-error">
                Backtracing for the <code>std::Error</code> is only available in nightly. For this reason, the stable <code>rust-starter</code> still uses the <a href="https://crates.io/crates/failure">Failure</a> crate. If you want to use <code>std::Error</code> with Backtrace in nightly, use the <code>newError</code> branch.
                </p>
            </section>

            <section>
                <header>
                    <h3 id="feature-configuration"><a href="#feature-configuration">#</a> Configuration</h3>
                </header>
                <p>
                <code>rust-starter</code> manages a configuration struct to mutate, store and retrieve a configuration state. Currently, a configuration file could be passed using the <code>-c</code> flag, and its content will be merged. Environment variables starting with <code>APP</code> will also be merged. It's recommended to change the <code>APP</code> prefix.
                </p>
                <p>
                Under the hood, <code>rust-starter</code> uses the <a href="https://github.com/mehcode/config-rs">config-rs</a> crate. However, it exposes an <code>AppConfig</code> struct that you can use to store and retrieve configuration. The relevant code can be found in <code>utils/src/app_config.rs</code>. It's recommended to use this struct instead of <code>config-rs</code> directly, as this depedency might get changed in the future.
                </p>
                <p>
                The configuration struct is initialized with a default configuration file at program start. This file can be found in <code>src/resources/default_config.toml</code>. You only need to initialize the configuration once. It's stored in a static <a href="https://doc.rust-lang.org/std/sync/struct.RwLock.html">RwLock</a> making it globally accessible and also thread-safe.
                </p>
                <pre><code>
    let config_contents = include_str!("resources/default_config.toml");
    AppConfig::init(Some(config_contents))?;
                </code></pre>
                <p>
                You can merge additional settings to your configuration struct, but also retrieve or change single settings.
                </p>
                <pre><code>
    // Merge config
    AppConfig::merge_config(cli_matches.value_of("config"))?;
    // Get config value
    AppConfig::get::<bool>("debug").unwrap();
    // Set config value
    AppConfig::set("database.url", "new url").unwrap();
                </code></pre>
            </section>

            <section>
                <header>
                    <h3 id="feature-logging"><a href="#feature-logging">#</a> Logging</h3>
                </header>
                <p>
                    Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis
                    egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget,
                    tempor sit amet, ante.
                </p>
            </section>

            <section>
                <header>
                    <h3 id="feature-testing"><a href="#feature-testing">#</a> Testing</h3>
                </header>
                <p>
                    Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis
                    egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget,
                    tempor sit amet, ante.
                </p>
            </section>

            <section>
                <header>
                    <h3 id="feature-cicd"><a href="#feature-cicd">#</a> CI/CD</h3>
                </header>
                <p>
                <code>rust-starter</code> is not optimized for any particular use-case; and should, preferrably, run in multiple operating systems under different conditions. Unfortunately, it's currently compiled only against Linux. macOS and Windows are high in the list of the OSes to be supported in the next releases.
                </p>
                <p>
Currently, <code>rust-starter</code> compiles under <a href="https://github.com/emk/rust-musl-builder">rust-musl-builder</a>. rust-musl-builder is a docker image to compile your rust application into a static Rust binary.
                </p>
                <p>
                While compiling locally is faster for development, this doesn't give many garantuees about your program running under different conditions. This is less important if you are deploying your program to a predictable environment (ie: a server). You can, then, change the Docker file to match the environment for your deployment. 
                </p>
                <p>
                On the other hand, if you are distributing the program under different conditions as a binary, it might be a good idea to have it compile as a static standalone binary. To do that, all you have to run is the compile command for that. You'll need to have <a href="https://www.docker.com/">Docker</a> and <a href="https://github.com/casey/just">just</a> installed in your system.
                </p>
                <pre><code>
    just docker
                </code></pre>
                <p>
                There is no output for this build process, although it's possible to tweak that. The reason is that the build happens over Github when you push your code. For that, see the next section Github actions.
                </p>
            </section>

            <section>
                <header>
                    <h3 id="feature-github"><a href="#feature-github">#</a> Github Actions</h3>
                </header>
                <p>
                    Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis
                    egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget,
                    tempor sit amet, ante.
                </p>
            </section>

            <section>
                <header>
                    <h3 id="feature-generate"><a href="#feature-generate">#</a> Cargo Generate</h3>
                </header>
                <p>
                Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis
                egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget,
                tempor sit amet, ante.
                </p>
            </section>

        </section>

        <hr />

        <section>
            <header>
                <h2 id="contributing">Contributing</h2>
            </header>
            <p>
                We welcome any kind of contributions. Whether you are reporting a bug, coding a
                feature or correcting a typo. Every effort counts; and all contributions
                are greatly appreaciated.
            </p>
            <p>
                Details on how to contribute can be found in <a href="https://github.com/rust-starter/rust-starter/blob/master/.github/CONTRIBUTING.md">CONTRIBUTING.md</a>.
            </p>
        </section>

        <hr />

        <section>
            <header>
                <h2 id="license">License</h2>
            </header>
            <p>
                rust-starter is licensed under the <a href="https://github.com/rust-starter/rust-starter/blob/master/LICENSE">MIT License</a>.
                Dependent libraries and crates have their own license. An analyze
                of licensing for these libraries is still under-work.
            </p>
            <p>
                The logo is sourced from <a href="https://www.flaticon.com/free-icon/nitrous-oxide_2906152">Flaticon</a>.
            </p>
        </section>

        <hr />

        <section>
            <header>
                <h2 id="author">Author</h2>
            </header>
            <p>
                <code>rust-starter</code> is built and maintained by <a href="https://omarabid.com">Abid Omar</a>.
                You can reach me at <span id="ckh9e56n4003l0gluftcp747e"><script>document.getElementById("ckh9e56n4003l0gluftcp747e").innerHTML='<n uers="znvygb:ehfgfgnegre@bznenovq.pbz">ehfgfgnegre@bznenovq.pbz</n>'.replace(/[a-zA-Z]/g,function(c){return String.fromCharCode((c<="Z"?90:122)>=(c=c.charCodeAt(0)+13)?c:c-26);});</script></span>.
            </p>
        </section>
    </div>
    <!-- Footer -->
    <script src="javascript-d41d8cd98f.min.js" type="module"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js"></script>
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script>
</body>

</html>
